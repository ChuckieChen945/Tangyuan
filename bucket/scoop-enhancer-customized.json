{
    "version": "0.0.1",
    "description": "scoop enhancer scripts",
    "homepage": "https://example.com/",
    "license": "MIT",
    "url": "https://github.com/excitoon/empty/releases/download/empty-1.0.7/empty-1.0.7.zip",
    "hash": "8739c76e681f900923b900c9df0ef75cf421d39cabb54650c4b9ad19b6a76d85",
    "depends": ["main/gsudo", "main/pwsh"],
    "installer": {
        "script": [
            "# 设置一个计划任务，每小时自动更新 Scoop",
            "$scoopPath = (scoop which scoop)",
            "$pwshPath = (scoop which pwsh)",
            "$argString = \"-NoProfile -NoLogo -WindowStyle Hidden -ExecutionPolicy Bypass -Command \"\"& `'$scoopPath`' update\"\"\"",
            "$Action = New-ScheduledTaskAction -Execute $pwshPath -Argument $argString",
            "$trigger = New-ScheduledTaskTrigger -Once -At (Get-Date) -RepetitionInterval (New-TimeSpan -Hours 1)",
            "$Settings = New-ScheduledTaskSettingsSet -AllowStartIfOnBatteries -DontStopIfGoingOnBatteries -StartWhenAvailable",
            "Register-ScheduledTask -TaskName 'ScoopAutoUpdate' -Action $Action -Trigger $trigger -Description '每小时自动更新 Scoop' -Settings $settings -RunLevel Highest -Force",
            "# This two can't be imported by .reg file, permission denied",
            "gsudo Add-MpPreference -ExclusionPath 'D:\\scoop'",
            "gsudo Add-MpPreference -ExclusionPath 'C:\\ProgramData\\scoop'"
        ]
    },
    "uninstaller": {
        "script": [
            "if (Get-ScheduledTask -TaskName 'ScoopAutoUpdate' -ErrorAction SilentlyContinue) {",
            "    Unregister-ScheduledTask -TaskName 'ScoopAutoUpdate' -Confirm:$false",
            "}"
        ]
    }
}
